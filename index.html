<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Relate by jakelazaroff</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Relate</h1>
      <h2 class="project-tagline">Relate is a tiny client-side relational document store.</h2>
      <a href="https://github.com/jakelazaroff/relate" class="btn">View on GitHub</a>
      <a href="https://github.com/jakelazaroff/relate/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/jakelazaroff/relate/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="relate" class="anchor" href="#relate" aria-hidden="true"><span class="octicon octicon-link"></span></a>Relate</h1>

<p><a href="http://badge.fury.io/bo/relate"><img src="https://badge.fury.io/bo/relate.svg" alt="Bower version"></a></p>

<p><strong>Relate</strong> is a tiny client-side relational document store. It's useful for web applications with static data for which there are still relationships — for example, a record label might have a website in which there are artists, albums and songs, all of which relate to each other.</p>

<h2>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<p>None! <img class="emoji" title=":tada:" alt=":tada:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f389.png" height="20" width="20" align="absmiddle"></p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Install manually: just copy <code>src/relate.js</code> wherever you'd like.</p>

<p>Install using Bower:</p>

<pre><code>bower install --save relate
</code></pre>

<p>Load in a browser:</p>

<div class="highlight highlight-html"><pre>&lt;<span class="pl-ent">script</span> <span class="pl-e">src</span>=<span class="pl-s"><span class="pl-pds">"</span>relate.js<span class="pl-pds">"</span></span>&gt;&lt;/<span class="pl-ent">script</span>&gt;</pre></div>

<p>Load using AMD:</p>

<div class="highlight highlight-javascript"><pre><span class="pl-c1">require</span>([<span class="pl-s"><span class="pl-pds">'</span>Relate<span class="pl-pds">'</span></span>], <span class="pl-k">function</span> (<span class="pl-smi">Relate</span>) {
  <span class="pl-c">// ...</span>
});</pre></div>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h2>

<h3>
<a id="relate-1" class="anchor" href="#relate-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Relate</h3>

<h4>
<a id="importdata" class="anchor" href="#importdata" aria-hidden="true"><span class="octicon octicon-link"></span></a>.import(data)</h4>

<p>Takes an object and populates the Relate datastore. The root object's properties are used as the collection names; its values are arrays of objects used as collection items. Each item must have an attribute <code>id</code> unique within its collection.</p>

<div class="highlight highlight-javascript"><pre>Relate.import({
  artists<span class="pl-k">:</span> [
    {
      id<span class="pl-k">:</span> <span class="pl-c1">1</span>,
      name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Turnover<span class="pl-pds">'</span></span>,
      songs<span class="pl-k">:</span> [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>]
    }
  ],
  songs<span class="pl-k">:</span> [
    {
      id<span class="pl-k">:</span> <span class="pl-c1">1</span>,
      name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Most Of The Time<span class="pl-pds">'</span></span>,
      artist<span class="pl-k">:</span> <span class="pl-c1">1</span>
    },
    {
      id<span class="pl-k">:</span> <span class="pl-c1">2</span>,
      name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>New Scream<span class="pl-pds">'</span></span>,
      artist<span class="pl-k">:</span> <span class="pl-c1">1</span>
    }
  ]
});</pre></div>

<h4>
<a id="collectionname" class="anchor" href="#collectionname" aria-hidden="true"><span class="octicon octicon-link"></span></a>.collection(name)</h4>

<p>Returns the collection named <code>name</code>, or throws an error if it doesn't exist.</p>

<div class="highlight highlight-javascript"><pre>Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>artists<span class="pl-pds">'</span></span>);
<span class="pl-c">// Relate.Collection {name: "artists", store: Object, add: function…}</span></pre></div>

<h4>
<a id="collectioncreatename-options" class="anchor" href="#collectioncreatename-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>.collection.create(name[, options])</h4>

<p>Creates a collection named <code>name</code> and returns it, or throws an error if a collection with that name already exists.</p>

<ul>
<li>
<strong>transform</strong>: a transformation function executed on each item added to the collection</li>
<li>
<strong>map</strong>: an object mapping properties on the collection's items to other collections</li>
</ul>

<p><img class="emoji" title=":speech_balloon:" alt=":speech_balloon:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4ac.png" height="20" width="20" align="absmiddle"> Shouldn't need to be called manually, since <code>Relate.import</code> will create collections automatically.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> <span class="pl-en">Song</span> <span class="pl-k">=</span> <span class="pl-k">function</span> () { <span class="pl-c">/* ... */</span> };

Relate.collection.create(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>, {
  map<span class="pl-k">:</span> { artist<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>artists<span class="pl-pds">'</span></span> },
  <span class="pl-en">transform</span>: <span class="pl-k">function</span> (<span class="pl-smi">item</span>) { <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-en">Artist</span>(item); }
});
<span class="pl-c">// Relate.Collection {name: "songs", store: Object, add: function…}</span></pre></div>

<h4>
<a id="collectionexistsname" class="anchor" href="#collectionexistsname" aria-hidden="true"><span class="octicon octicon-link"></span></a>.collection.exists(name)</h4>

<p>Returns true if a collection named <code>name</code> exists, or false if it doesn't.</p>

<div class="highlight highlight-javascript"><pre>Relate.collection.exists(<span class="pl-s"><span class="pl-pds">'</span>artists<span class="pl-pds">'</span></span>);
<span class="pl-c">// true</span>
Relate.collection.exists(<span class="pl-s"><span class="pl-pds">'</span>labels<span class="pl-pds">'</span></span>);
<span class="pl-c">// false</span></pre></div>

<h4>
<a id="map" class="anchor" href="#map" aria-hidden="true"><span class="octicon octicon-link"></span></a>.map</h4>

<p>An object containing mappings between item properties and collection names. The keys in <code>Relate.map</code> correspond  to collection names. Each property in the collection's map object corresponds to a property on that collection's items, and each value corresponds to the name of the target collection.</p>

<div class="highlight highlight-javascript"><pre>Relate.map.songs <span class="pl-k">=</span> { artist<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>artists<span class="pl-pds">'</span></span> };</pre></div>

<h4>
<a id="mixinitem-collection" class="anchor" href="#mixinitem-collection" aria-hidden="true"><span class="octicon octicon-link"></span></a>.mixin(item, collection)</h4>

<p>Copies the methods defined in <code>Item</code> to <code>item</code>, binding <code>item</code> and <code>collection</code> to each method as <code>this</code> and the first argument, respectively. If <code>Item.prefix</code> is defined, creates an object with that property on <code>item</code> and copies the method there, instead of directly on <code>item</code> itself.</p>

<p><img class="emoji" title=":speech_balloon:" alt=":speech_balloon:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4ac.png" height="20" width="20" align="absmiddle"> Shouldn't need to be called manually, since <code>Collection.add</code> will mix in <code>Item</code> methods automatically.</p>

<h4>
<a id="noconflict" class="anchor" href="#noconflict" aria-hidden="true"><span class="octicon octicon-link"></span></a>.noConflict()</h4>

<p>If it was set on a global object, restores <code>Relate</code> to its prior value and returns it.</p>

<h4>
<a id="transform" class="anchor" href="#transform" aria-hidden="true"><span class="octicon octicon-link"></span></a>.transform</h4>

<p>An object containing transformation functions executed on each item as it's imported into a collection. The properties in <code>Relate.transform</code> correspond to collection names. The transformation function receives the item's raw properties as its argument and must return an object to be used as the item.</p>

<p>Transforms must be set before data is imported.</p>

<div class="highlight highlight-javascript"><pre><span class="pl-k">var</span> <span class="pl-en">Artist</span> <span class="pl-k">=</span> <span class="pl-k">function</span> () { <span class="pl-c">/* ... */</span> };

<span class="pl-c1">Relate.transform</span>.<span class="pl-en">artists</span> <span class="pl-k">=</span> <span class="pl-k">function</span> (<span class="pl-smi">item</span>) { <span class="pl-k">return</span> <span class="pl-k">new</span> <span class="pl-en">Artist</span>(item); };</pre></div>

<h3>
<a id="collection" class="anchor" href="#collection" aria-hidden="true"><span class="octicon octicon-link"></span></a>Collection</h3>

<h4>
<a id="collectionname-options" class="anchor" href="#collectionname-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Collection(name[, options])</h4>

<p>Creates a collection named <code>name</code> and returns it, or throws an error if a collection with that name already exists.</p>

<ul>
<li>
<strong>transform</strong>: a transformation function executed on each item added to the collection</li>
<li>
<strong>map</strong>: an object mapping properties on the collection's items to other collections</li>
</ul>

<p><img class="emoji" title=":bangbang:" alt=":bangbang:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/203c.png" height="20" width="20" align="absmiddle"> If a collection is created directly using the constructor, other collections and items will not be able to access it. Use <code>Relate.collection.create</code> instead.</p>

<h4>
<a id="additem" class="anchor" href="#additem" aria-hidden="true"><span class="octicon octicon-link"></span></a>.add(item)</h4>

<p>Given an object <code>item</code>, executes the collection's transformation function on it, mixes in the <code>Item</code> methods, adds it to the collection and returns it. If an item with the same ID already exists in the collection, throws an error.</p>

<p><img class="emoji" title=":speech_balloon:" alt=":speech_balloon:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4ac.png" height="20" width="20" align="absmiddle"> Shouldn't need to be called manually, since <code>Collection.import</code> will iterate over the array of items and add them.</p>

<div class="highlight highlight-javascript"><pre>Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>artists<span class="pl-pds">'</span></span>).<span class="pl-c1">add</span>({
  id<span class="pl-k">:</span> <span class="pl-c1">1</span>,
  name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Turnover<span class="pl-pds">'</span></span>,
  songs<span class="pl-k">:</span> [<span class="pl-c1">1</span>, <span class="pl-c1">2</span>]
});</pre></div>

<h4>
<a id="getquery" class="anchor" href="#getquery" aria-hidden="true"><span class="octicon octicon-link"></span></a>.get(query)</h4>

<p>If <code>query</code> is an ID, returns the corresponding item in the collection. If <code>query</code> is an array of IDs, returns an array of the corresponding items in the collection. If <code>query</code> is a hash, returns an array of all items in the collection with matching keys and values.</p>

<div class="highlight highlight-javascript"><pre>Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).get(<span class="pl-c1">1</span>);
<span class="pl-c">// Song {id: 1, name: "Most Of The Time", artist: 1, relate: Object}</span>
Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).get([<span class="pl-c1">1</span>, <span class="pl-c1">2</span>]);
<span class="pl-c">// [Song {id: 1, name: "Most Of The Time"…}, Song {id: 2, name: "New Scream"…}]</span>
Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).get({ name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>New Scream<span class="pl-pds">'</span></span> });
<span class="pl-c">// [Song {id: 2, name: "New Scream"…}]</span></pre></div>

<h4>
<a id="importitems" class="anchor" href="#importitems" aria-hidden="true"><span class="octicon octicon-link"></span></a>.import(items)</h4>

<p>Takes an array and populates the collection. Each object in the array is used as an item and must have a unique attribute <code>id</code>.</p>

<p><img class="emoji" title=":speech_balloon:" alt=":speech_balloon:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f4ac.png" height="20" width="20" align="absmiddle"> Shouldn't need to be called manually, since <code>Relate.import</code> will import each array of items into a collection automatically.</p>

<div class="highlight highlight-javascript"><pre>Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).import([
  {
    id<span class="pl-k">:</span> <span class="pl-c1">1</span>,
    name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>Most Of The Time<span class="pl-pds">'</span></span>,
    artist<span class="pl-k">:</span> <span class="pl-c1">1</span>
  },
  {
    id<span class="pl-k">:</span> <span class="pl-c1">2</span>,
    name<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>New Scream<span class="pl-pds">'</span></span>,
    artist<span class="pl-k">:</span> <span class="pl-c1">1</span>
  }
]);</pre></div>

<h4>
<a id="keykey" class="anchor" href="#keykey" aria-hidden="true"><span class="octicon octicon-link"></span></a>.key(key)</h4>

<p>Returns the collection name mapped to property <code>key</code>, if it exists, or returns <code>key</code> if it corresponds to an unmapped collection. Otherwise, returns <code>undefined</code>.</p>

<div class="highlight highlight-javascript"><pre>Relate.map.songs <span class="pl-k">=</span> { artist<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>artists<span class="pl-pds">'</span></span> };

Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).key(<span class="pl-s"><span class="pl-pds">'</span>artist<span class="pl-pds">'</span></span>);
<span class="pl-c">// "artists"</span>
Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).key(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>);
<span class="pl-c">// "songs"</span>
Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).key(<span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>);
<span class="pl-c">// undefined</span></pre></div>

<h4>
<a id="mappedkey" class="anchor" href="#mappedkey" aria-hidden="true"><span class="octicon octicon-link"></span></a>.mapped(key)</h4>

<p>Returns true if a mapping exists in the collection for property <code>key</code>, or false if it does not.</p>

<div class="highlight highlight-javascript"><pre>Relate.map.songs <span class="pl-k">=</span> { artist<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">'</span>artists<span class="pl-pds">'</span></span> };

Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).key(<span class="pl-s"><span class="pl-pds">'</span>artist<span class="pl-pds">'</span></span>);
<span class="pl-c">// true</span>
Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).key(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>);
<span class="pl-c">// false</span></pre></div>

<h3>
<a id="item" class="anchor" href="#item" aria-hidden="true"><span class="octicon octicon-link"></span></a>Item</h3>

<h4>
<a id="getkey" class="anchor" href="#getkey" aria-hidden="true"><span class="octicon octicon-link"></span></a>.get(key)</h4>

<p>Given a property <code>key</code> that exists on an item, returns either the related item in the corresponding collection or property's value.</p>

<div class="highlight highlight-javascript"><pre>Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).get(<span class="pl-c1">1</span>).get(<span class="pl-s"><span class="pl-pds">'</span>name<span class="pl-pds">'</span></span>);
<span class="pl-c">// "Most Of The Time"</span>
Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).get(<span class="pl-c1">1</span>).get(<span class="pl-s"><span class="pl-pds">'</span>artist<span class="pl-pds">'</span></span>);
<span class="pl-c">// Artist {id: 1, name: "Turnover", songs: Array[2], relate: Object}</span></pre></div>

<h4>
<a id="prefix" class="anchor" href="#prefix" aria-hidden="true"><span class="octicon octicon-link"></span></a>.prefix</h4>

<p>A string used as a namespace for <code>Item</code> methods copied to items. Used to prevent conflicts between <code>Item</code> methods and properties that already exist in items.</p>

<div class="highlight highlight-javascript"><pre>Relate.Item.<span class="pl-c1">prefix</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>relate<span class="pl-pds">'</span></span>;

Relate.collection(<span class="pl-s"><span class="pl-pds">'</span>songs<span class="pl-pds">'</span></span>).get(<span class="pl-c1">1</span>).relate.get(<span class="pl-s"><span class="pl-pds">'</span>artist<span class="pl-pds">'</span></span>);
<span class="pl-c">// Artist {id: 1, name: "Turnover", songs: Array[2], relate: Object}</span></pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/jakelazaroff/relate">Relate</a> is maintained by <a href="https://github.com/jakelazaroff">jakelazaroff</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

